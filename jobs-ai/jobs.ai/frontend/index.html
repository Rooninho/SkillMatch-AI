<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Rooney AI job reccomender
       – Demo</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif; margin: 32px; }
      .card { max-width: 880px; margin: auto; padding: 24px; border: 1px solid #e5e7eb; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,.04); }
      textarea, input { width: 100%; padding: 12px; margin: 8px 0; border-radius: 12px; border: 1px solid #d1d5db; }
      button { padding: 12px 16px; border-radius: 12px; border: 0; cursor: pointer; }
      .btn { background: black; color: white; }
      .row { display: grid; grid-template-columns: 1fr 120px; gap: 12px; }
      .job { padding: 12px; border: 1px solid #eee; border-radius: 12px; margin-top: 8px; }
      .muted { color: #6b7280; font-size: 12px; }
      .score { font-weight: 600; }
      .link { text-decoration: none; }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>AI Job Recommender</h1>
      <p>Type your skills, click Recommend, and see top-matching jobs.</p>
      <div class="row">
        <textarea id="skills" rows="3" placeholder="e.g., python, sql, data analysis, aws, fastapi"></textarea>
        <div>
          <label>Top K</label>
          <input id="topk" type="number" min="1" max="20" value="5"/>
          <button id="go" class="btn">Recommend</button>
        </div>
      </div>
      <div id="results"></div>
    </div>

    <script>
      const api = "http://localhost:8000";
      document.getElementById("go").onclick = async () => {
        const skills = document.getElementById("skills").value;
        const top_k = parseInt(document.getElementById("topk").value || "5");
        const res = await fetch(api + "/recommend", {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify({skills, top_k})
        });
        const data = await res.json();
        const root = document.getElementById("results");
        root.innerHTML = "";
        (data.results || []).forEach(r => {
          const div = document.createElement("div");
          div.className = "job";
          div.innerHTML = \`
            <div><a class="link" href="\${r.url}" target="_blank">\${r.title}</a> — \${r.company}</div>
            <div class="muted">\${r.location}</div>
            <div class="muted">Score: <span class="score">\${r.score.toFixed(3)}</span></div>
          \`;
          root.appendChild(div);
        });
      };
    </script>
    
  </body>

</html>